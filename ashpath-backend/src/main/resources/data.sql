


-- 1. Criação das tabelas
CREATE TABLE IF NOT EXISTS APP_ROLE (
    Id BIGINT PRIMARY KEY AUTO_INCREMENT,
    Name VARCHAR(50) UNIQUE NOT NULL
);

CREATE TABLE IF NOT EXISTS APP_USER (
    Id BIGINT PRIMARY KEY AUTO_INCREMENT,
    Email VARCHAR(64),
    Password VARCHAR(64),
    Fullname VARCHAR(128),
    RegistrationDate TIMESTAMP,
    LastActivityDate TIMESTAMP,
    Specialization VARCHAR(255)
);

CREATE TABLE IF NOT EXISTS ROLE_APP_USER (
    App_User_Id BIGINT NOT NULL,
    Role_App_Id BIGINT NOT NULL,
    PRIMARY KEY (App_User_Id, Role_App_Id),
    FOREIGN KEY (App_User_Id) REFERENCES APP_USER(Id),
    FOREIGN KEY (Role_App_Id) REFERENCES APP_ROLE(Id)
);

CREATE TABLE IF NOT EXISTS CREMATION_ENTRY (
    Id BIGINT PRIMARY KEY AUTO_INCREMENT,
    EnteredDate TIMESTAMP,
    Necrotomist_Id BIGINT,
    FOREIGN KEY (Necrotomist_Id) REFERENCES APP_USER(Id)
);

CREATE TABLE IF NOT EXISTS GRAVE (
    Id BIGINT PRIMARY KEY AUTO_INCREMENT,
    Location VARCHAR(128)
);

CREATE TABLE IF NOT EXISTS DECEASED (
    Id BIGINT PRIMARY KEY AUTO_INCREMENT,
    Fullname VARCHAR(128),
    BirthDate DATE,
    DeathDate DATE,
    CauseOfDeath VARCHAR(128),
    deathCertificate LONGBLOB,
    FatherName VARCHAR(128),
    MotherName VARCHAR(128),
    Status VARCHAR(50),
    CremationEnteredDate TIMESTAMP,
    CremationEntryId BIGINT,
    GraveId BIGINT,
    FOREIGN KEY (CremationEntryId) REFERENCES CREMATION_ENTRY(Id),
    FOREIGN KEY (GraveId) REFERENCES GRAVE(Id)
);


INSERT INTO APP_ROLE (Name) VALUES
('ADMIN'),
('NECROTOMIST');

INSERT INTO APP_USER (Email, Password, Fullname, RegistrationDate, LastActivityDate, Specialization) VALUES
('admin@ashpath.com', 'senha123', 'Administrador do Sistema', NOW(), NOW(), 'Administração'),
('necrotomista1@ashpath.com', 'senha123', 'Joao Silva', NOW(), NOW(), 'Necrotomia'),
('necrotomista2@ashpath.com', 'senha123', 'Maria Souza', NOW(), NOW(), 'Necrotomia');

INSERT INTO ROLE_APP_USER (App_User_Id, Role_App_Id) VALUES
(1, 1),
(2, 2),
(3, 2);

INSERT INTO CREMATION_ENTRY (EnteredDate, Necrotomist_Id) VALUES
(NOW(), 2),
(NOW(), 3),
(NOW(), 2);

-- 3. Inserir túmulos com IDs explícitos
INSERT INTO GRAVE (Id, Location) VALUES
(1, 'Maceio'),
(2, 'Ibura'),
(3, 'Loja renner'),
(4, 'Cemitério São João'),
(5, 'Memorial Paz Eterna'),
(6, 'Jardim da Saudade');

-- 4. Inserir falecidos com certificado de óbito em PDF (BLOB)
INSERT INTO DECEASED (
    Fullname, BirthDate, DeathDate, CauseOfDeath, deathCertificate,
    FatherName, MotherName, Status,
    CremationEnteredDate, CremationEntryId, GraveId
) VALUES
('Carlos Alberto', '1950-05-15', '2023-01-10', 'Doença cardiovascular',
 X'255044462D312E0D0A25B5B5B5B50D0A312030206F626A0D0A3C3C2F547970652F436174616C6F672F50616765732032203020520D0A2F4F75746C696E65732033203020520D0A2F4D657461646174612034203020520D0A3E3E0D0A656E646F626A0D0A', -- PDF simples
 'José Alberto', 'Maria Silva', 'GRAVED', '2023-01-10 08:30:00', 1, 1),

('Ana Paula', '1975-08-22', '2023-02-15', 'Acidente automobilístico',
 X'255044462D312E0D0A25B5B5B5B50D0A312030206F626A0D0A3C3C2F547970652F436174616C6F672F50616765732032203020520D0A2F4F75746C696E65732033203020520D0A2F4D657461646174612034203020520D0A3E3E0D0A656E646F626A0D0A', -- PDF simples
 'Pedro Henrique', 'Claudia Santos', 'WAITING_CREMATION', NOW(), 2, 2),

('Roberto Nascimento', '1962-11-30', '2023-03-20', 'COVID-19',
 X'255044462D312E0D0A25B5B5B5B50D0A312030206F626A0D0A3C3C2F547970652F436174616C6F672F50616765732032203020520D0A2F4F75746C696E65732033203020520D0A2F4D657461646174612034203020520D0A3E3E0D0A656E646F626A0D0A', -- PDF simples
 'Antônio Nascimento', 'Beatriz Oliveira', 'CREMATED', '2023-03-21 10:00:00', 3, 3),

('Mariana Costa', '1988-07-14', '2023-04-05', 'Câncer',
 X'255044462D312E0D0A25B5B5B5B50D0A312030206F626A0D0A3C3C2F547970652F436174616C6F672F50616765732032203020520D0A2F4F75746C696E65732033203020520D0A2F4D657461646174612034203020520D0A3E3E0D0A656E646F626A0D0A', -- PDF simples
 'Fernando Costa', 'Isabela Rodrigues', 'GRAVED', '2023-04-05 14:15:00', 1, 4),

('Belal Mohamend', '1992-12-25', '2023-05-18', 'Acidente de trabalho',
 X'255044462D312E0D0A25B5B5B5B50D0A312030206F626A0D0A3C3C2F547970652F436174616C6F672F50616765732032203020520D0A2F4F75746C696E65732033203020520D0A2F4D657461646174612034203020520D0A3E3E0D0A656E646F626A0D0A', -- PDF simples
 'Ricardo Oliveira', 'Patrícia Souza', 'WAITING_CREMATION', NOW(), 2, 5),

('Della Maddalena', '1973-09-30', '2023-06-22', 'Insuficiência renal',
 X'255044462D312E0D0A25B5B5B5B50D0A312030206F626A0D0A3C3C2F547970652F436174616C6F672F50616765732032203020520D0A2F4F75746C696E65732033203020520D0A2F4D657461646174612034203020520D0A3E3E0D0A656E646F626A0D0A', -- PDF simples
 'Carlos Silva', 'Ana Maria', 'CREMATED', '2023-06-23 14:30:00', 3, 6);